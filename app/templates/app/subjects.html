{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block content %}
<br/>
<div class="project-list">
  <h2>{% trans "Subjects" %}</h2>
  <br>
  <div class="row">
      {% for item in subject_data %}
        <h5>{{ item.subject.name }}</h5>
        <div class="col-md-6 col-12 detail-col">
          <h6>{% trans "Documents" %}</h6>
          {% if item.documents.exists %}
              <div class="documents">
                  <ul>
                      {% for document in item.documents %}
                      <li>
                        <span class="icon-text"><i class="detail-icon bi-file-earmark"></i></span>
                        <span class="icon-text"><a href="{% url 'document_detail' document.id %}">{{ document.title }}</a></span>
                      </li>
                      {% endfor %}
                  </ul>
              </div>
          {% else %}
              <p>{% trans "No documents available for this subject." %}</p>
          {% endif %}
        </div>
        <div class="col-md-6 col-12 detail-col">
            <h6>{% trans "Projects" %}</h6>
            {% if item.projects.exists %}
                <div class="projects">
                    <ul>
                        {% for project in item.projects %}
                        <li>
                          <span class="icon-text"><i class="detail-icon bi-clipboard2"></i></span>
                          <span class="icon-text"><a href="{% url 'project_detail' project.id %}">{{ project.name }}</a></span>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            {% else %}
                <p>{% trans "No projects available for this subject." %}</p>
            {% endif %}
        </div>
        <br>
        <hr>
        <br>
      {% endfor %}
  </div>

  {% if page_obj.has_other_pages %}
  <div class="pagination-wrapper d-flex justify-content-center align-items-center">
    <ul class="pagination">
        {% if page_obj.has_previous %}
            <li class="page-item"><a class="page-link" href="?page=1">&laquo; {% trans "First" %}</a></li>
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">&lsaquo; {% trans "Previous" %}</a></li>
        {% else %}
            <li class="page-item disabled"><a class="page-link" href="#">&laquo; {% trans "First" %}</a></li>
            <li class="page-item disabled"><a class="page-link" href="#">&lsaquo; {% trans "Previous" %}</a></li>
        {% endif %}

        {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
                <li class="page-item active"><a class="page-link" href="#">{{ num }}</a></li>
            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                <li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
            {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">{% trans "Next" %} &rsaquo;</a></li>
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">{% trans "Last" %} &raquo;</a></li>
        {% else %}
            <li class="page-item disabled"><a class="page-link" href="#">{% trans "Next" %} &rsaquo;</a></li>
            <li class="page-item disabled"><a class="page-link" href="#">{% trans "Last" %} &raquo;</a></li>
        {% endif %}
    </ul>
  </div>
  {% endif %}
</div>
{% endblock content %}
